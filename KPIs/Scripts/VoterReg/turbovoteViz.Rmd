---
title: ""
output: html_notebook
---
#### Month over Month Pacing
* We're pacing better than March!
```{r warning=FALSE, echo=FALSE, message=FALSE, fig.width=11, fig.height=6}
ggplot(MoM, aes(x=dayOfMonth, value)) +
  geom_line(aes(color=month)) + 
  labs(title='Voters Registered Month over Month', x='Day of Month', y='Voters Registered') +
  theme(plot.title = element_text(hjust=.5))
```

* Web is showing strongest performance to date. Other channels are lagging
```{r warning=FALSE, echo=FALSE, message=FALSE, fig.width=11, fig.height=6}
ggplot(MoM.Source, aes(x=dayOfMonth, value)) +
  geom_line(aes(color=month)) + 
  facet_wrap(~Source) +
  labs(title='Voters Registered Month over Month by Source', x='Day of Month', y='Voters Registered') +
  theme(plot.title = element_text(hjust=.5))
```

#### Northstar Source
* Web users disproportionately represent all those going through the flow 
* Similar proportions of statuses across user channels
```{r warning=FALSE, echo=FALSE, message=FALSE, fig.width=11, fig.height=6}
library(scales)
sumIf <- function(x) {
  val <- ifelse(sum(x)>1, sum(x), NA)
}
leg <- 'Confirmed: Self-Reported (RB); Unknown: Dropped Off; Register-form: Completed Form; Register-OVR: Completed Online'
ggplot(uSource, aes(x=ds_vr_status, y=value, fill=reorder(user_source, value))) +
  geom_bar(stat='identity', position='stack') +
  geom_text(position=position_stack(vjust = 0.5), aes(label=label), size=3) +
  stat_summary(fun.y = sumIf, aes(label = ..y.., group = ds_vr_status), geom = "text", vjust=-.2) +
  facet_wrap(~variable, scales='free') +
  scale_fill_brewer(palette = 'Set2') +
  scale_y_continuous(breaks=pretty_breaks(10)) + 
  labs(
    x=leg,
    y='',
    title='Counts and Proportions of Form Status split by User Source'
    ) +
  theme(plot.title = element_text(hjust=.5)) + 
  guides(fill=guide_legend(title='User Source'))
```
#### Referral Source
* Unsurprisingly, web also makes up the bulk of referral sources
```{r warning=FALSE, echo=FALSE, message=FALSE, fig.width=11, fig.height=6}
ggplot(Source, aes(x=ds_vr_status, y=value, fill=reorder(source, value))) +
  geom_bar(stat='identity', position='stack') +
  geom_text(position=position_stack(vjust = 0.5), aes(label=label), size=3) +
  stat_summary(fun.y = sumIf, aes(label = ..y.., group = ds_vr_status), geom = "text", vjust=-.2) +
  facet_wrap(~variable, scales='free') +
  labs(y='') +
  scale_y_continuous(breaks=pretty_breaks(10)) +
  scale_fill_brewer(palette = 'Set2') + 
  labs(
    x=leg,
    y='',
    title='Counts and Proportions of Form Status split by Source'
    ) +
  theme(plot.title = element_text(hjust=.5)) + 
  guides(fill=guide_legend(title='Source'))
```
#### Source Details

* We've gotten access to many denominators. Planning to build into report this week

**Email**

  - Now with more informative buckets!
  - We've gotten access to newsletter info in quasar and so can start getting conversion rates
  
**SMS**

  - This won't become useful until we find a way to add more source details
  - I believe better attribution is on the horizon with Bert.ly
  
**Social**

  - Generally isn't performing very well, but Facebook is doing better than the others. Is this because we've done more on facebook or because our efforts are smarter?
  
**Web**

  - Campaign pages and Hellobar are dominating 
  - We have full phoenix funnels, and so can start report conversions here too
```{r warning=FALSE, echo=FALSE, message=FALSE, fig.width=11, fig.height=6}
# ggplot(detSource.t, aes(x=ds_vr_status, y=value, fill=source_details)) +
#   geom_bar(stat='identity', position='stack') +
#   labs(y='') +
#   geom_text(position=position_stack(vjust = 0.5), aes(label=label), size=3) +
#   scale_y_continuous(breaks=pretty_breaks(10)) +
#   facet_wrap(~variable, scales='free')  + 
#   labs(
#     x='Confirmed: Self-Reported (RB, Not Registration), Unknown: Dropped Off, Registration: Completed Form, Ineligible: Ineligible',
#     y='',
#     title='Counts and Proportions of Form Status split by Source Details'
#     ) +
#   theme(plot.title = element_text(hjust=.5)) + 
#   guides(fill=guide_legend(title='Source Details'))
```
```{r warning=FALSE, echo=FALSE, message=FALSE, fig.width=12, fig.height=24}
library(gridExtra)
ss <- split(sourceStep, f=sourceStep$source)
p1 <- ggplot(ss$email, aes(x=ds_vr_status, y=value, fill=reorder(details, value))) +
  geom_bar(stat='identity', position='stack') +
  geom_text(position=position_stack(vjust = 0.5), aes(label=label), size=3) +
  stat_summary(fun.y = sumIf, aes(label = ..y.., group = ds_vr_status), geom = "text", vjust=-.2) +
  scale_y_continuous(breaks=pretty_breaks(10)) +
  facet_wrap(~variable, scales='free')  + 
  labs(x='',y='') +
  theme(plot.title = element_text(hjust=.5)) + 
  guides(fill=guide_legend(title='Source Details'))
p2 <- p1 %+% ss$sms %+% ggtitle('SMS')
p3 <- p1 %+% ss$social %+% ggtitle('Social')
p4 <- p1 %+% ss$web %+% ggtitle('Web')
p1 <- p1 %+% ss$email %+% ggtitle('Email')
p4 <- p1 %+% ss$partner %+% ggtitle('Partner')
grid.arrange(
  p1,p2,p3,p4,ncol=1,
  top='Counts and Proportions of Form Status split by Source and Details',
  bottom=leg
  )

```


#### Signups & Reportbacks
* The fact that online completers also have more reportbacks is very interesting. Could this mean that this is a cohort of people who is just generally more comfortable doing activities on the web and so are both more likely to submit photo reportbacks and submit forms online? Does this mean more people could be doing the process online than currently are? If so, how can we make it easier for people to know what they are can and can't do?
```{r warning=FALSE, echo=FALSE, message=FALSE, fig.width=11, fig.height=6}
ggplot(camp, aes(x=variable, y=value, fill=reorder(ds_vr_status, -value))) +
  geom_bar(stat='identity', position='dodge') +
  facet_wrap(~variable, scales='free') +
  geom_text(position=position_dodge(width=.9), aes(label=round(value, 2.5)), size=3, vjust=-.2) +
  scale_y_continuous(breaks=pretty_breaks(10)) +
  scale_fill_brewer(palette = 'Set2') + 
  labs(
    x=leg,
    y='',
    title='Average Number of Reportbacks and Signups by Form Status'
    ) +
  theme(plot.title = element_text(hjust=.5)) + 
  guides(fill=guide_legend(title='Status'))
```

